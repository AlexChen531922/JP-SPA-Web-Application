{% extends "base.html" %} {% block title %}{{ vendor.name }} — Gallery{%
endblock %} {% block content %}

<div class="container-xxl">
  <section class="py-4">
    <div class="d-flex flex-wrap align-items-center gap-2 mb-3">
      <h1 class="h2 mb-0">
        <span class="badge text-bg-dark border">{{ vendor.name }}</span>
        <span class="fw-normal">gallery</span>
      </h1>
      <span class="text-muted">· {{ total }} results</span>
    </div>

    <div class="row g-3">
      {% if images|length == 0 %}
      <div class="col-12">
        <p class="text-muted mb-0">No images yet.</p>
      </div>
      {% endif %} {% for img in images %}
      <div class="col-12 col-sm-6 col-md-4 col-lg-3">
        <div class="card h-100 shadow-sm rounded-4 hover-zoom">
          <div class="ratio ratio-4x3">
            <img
              src="{{ url_for('static', filename=img.url) }}"
              class="w-100 h-100 object-fit-cover rounded-top-4"
              alt="{{ img.title }}"
              loading="lazy"
            />
          </div>

          <div class="card-body d-flex flex-column">
            <h6 class="card-title mb-1 text-truncate" title="{{ img.title }}">
              {{ img.title or 'Untitled' }}
            </h6>

            <div class="d-flex align-items-center justify-content-between">
              {% if img.uploaded_at.__class__.__name__ in ['date','datetime'] %}
              <span class="badge text-bg-light"
                >{{ img.uploaded_at.strftime('%Y-%m-%d') }}</span
              >
              {% else %} <span>{{ img.uploaded_at or '-' }}</span> {% endif %}
              <div class="badge text-bg-dark">
                {{ img.license_types|join(', ') }}
              </div>
            </div>
            <div
              class="d-flex align-items-center justify-content-between w-100"
            >
              <span class="badge text-bg-light mt-1">
                ${{ '%.2f'|format(img.price or 0) }}
              </span>
              <span class="small badge text-bg-light"
                >{{ img.resolution or '-' }}</span
              >
            </div>
            <div class="d-flex flex-wrap gap-1 mt-2">
              {% if img.event_name %}
              <span class="badge badge-event">{{ img.event_name }}</span>
              {% endif %}
            </div>
            <div>
              {% for c in img.category_names %}
              <span class="badge badge-category">#{{ c.capitalize() }}</span>
              {% endfor %}
            </div>

            <a
              class="stretched-link"
              href="{{ url_for('main.item_detail', id=img.id) }}"
            ></a>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
  </section>
</div>
{% endblock %}
